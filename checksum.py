def checksum(data: bytes) -> bytes:
    copy = data
    if len(copy) % 2:
        copy += b"\0"
    ret = 0
    for i in range(0, len(copy), 2):
        a = copy[i] << 8
        a += copy[i+1]
        ret += a
        while ret > 0xffff:
            ret = (ret & 0xffff)+1
    ret = (~ret) & 0xffff
    return ret.to_bytes(2, "big")


def verify(data: bytes) -> bool:
    res = checksum(data)
    return int.from_bytes(res, "big") == 0


# before = bytes([0x45, 0x00, 0x00, 0x73, 0x00, 0x00, 0x40, 0x00, 0x40, 0x11,
#                 0x00, 0x00, 0xc0, 0xa8, 0x00, 0x01, 0xc0, 0xa8, 0x00, 0xc7])
# print(checksum(before))
# after = bytes([0x45, 0x00, 0x00, 0x73, 0x00, 0x00, 0x40, 0x00, 0x40, 0x11,
#                0xb8, 0x61, 0xc0, 0xa8, 0x00, 0x01, 0xc0, 0xa8, 0x00, 0xc7])
# print(verify(after))

# test = bytes([0x45, 0x00, 0x00, 0x34, 0xd8, 0x49, 0x40, 0x00, 0x40,
#              0x06, 0x13, 0xc5, 0xc0, 0xa8, 0x01, 0xa4, 0xcc, 0x2c, 0xc0, 0x3c])
# print(checksum(test))
